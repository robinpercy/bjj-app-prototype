*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}:root{--bg: #0e1117;--surface: #161b22;--surface2: #1c2330;--border: #2a3140;--text: #e6edf3;--text-dim: #8b949e;--accent: #58a6ff;--gold: #f0c040;--red: #f85149;--green: #3fb950;--orange: #d29922;--purple: #bc8cff}html{height:100%}body{height:100%;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:#000;color:var(--text);overflow:hidden;touch-action:manipulation;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;user-select:none}.phone-frame{width:100%;max-width:430px;height:100vh;height:100dvh;margin:0 auto;background:var(--bg);display:flex;flex-direction:column;position:relative;overflow:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.screen{position:absolute;inset:0;display:flex;flex-direction:column;opacity:0;pointer-events:none;transition:opacity .35s ease}.screen.active{opacity:1;pointer-events:auto;position:relative;flex:1;min-height:0}.start-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 24px;gap:8px}.start-logo{font-size:80px;margin-bottom:8px;animation:float 3s ease-in-out infinite}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.start-title{font-size:40px;font-weight:900;letter-spacing:4px;background:linear-gradient(135deg,var(--accent),var(--purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.start-sub{font-size:14px;color:var(--text-dim);letter-spacing:2px;text-transform:uppercase;margin-bottom:32px}.difficulty-select{display:flex;flex-direction:column;align-items:center;gap:10px;margin-bottom:24px}.difficulty-label{font-size:12px;text-transform:uppercase;letter-spacing:1.2px;color:var(--text-dim)}.difficulty-buttons{display:flex;gap:8px}.diff-btn{padding:10px 20px;border-radius:10px;border:2px solid var(--border);background:var(--surface);color:var(--text-dim);font-size:14px;font-weight:600;cursor:pointer;transition:all .15s}.diff-btn.active{border-color:var(--accent);color:var(--accent);background:#58a6ff1a}.primary-btn{padding:16px 48px;border-radius:14px;border:none;background:linear-gradient(135deg,var(--accent),var(--purple));color:#fff;font-size:16px;font-weight:700;letter-spacing:1px;cursor:pointer;transition:transform .1s,opacity .15s;text-transform:uppercase}.primary-btn:active{transform:scale(.96)}.secondary-btn{padding:14px 40px;border-radius:14px;border:2px solid var(--border);background:transparent;color:var(--text-dim);font-size:14px;font-weight:600;cursor:pointer;transition:all .15s}.start-hint{font-size:12px;color:var(--text-dim);margin-top:16px}.opponent-bar{display:flex;align-items:center;gap:12px;padding:12px 20px 10px;border-bottom:1px solid var(--border);flex-shrink:0;background:var(--surface)}.avatar{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:22px;flex-shrink:0}.opponent-avatar{background:var(--red)}.opponent-info{flex:1}.opponent-name{font-weight:700;font-size:15px}.opponent-sub{font-size:12px;color:var(--text-dim)}.score-block{display:flex;flex-direction:column;align-items:flex-end;gap:2px}.score-display{display:flex;align-items:center;gap:6px;font-size:24px;font-weight:800}.score-opp{color:var(--red)}.score-dash{color:var(--text-dim);font-weight:400}.score-you{color:var(--accent)}.adv-display{display:flex;align-items:center;gap:4px;font-size:12px;font-weight:600}.adv-label{font-size:9px;text-transform:uppercase;letter-spacing:.8px;color:var(--text-dim);margin-right:2px}.adv-opp{color:var(--red)}.adv-dash{color:var(--text-dim);font-weight:400}.adv-you{color:var(--accent)}.token-strip{display:flex;align-items:center;gap:6px;padding:6px 20px;flex-shrink:0}.player-token-strip{z-index:1}.token-strip-label{font-size:10px;text-transform:uppercase;letter-spacing:1.2px;color:var(--text-dim);min-width:30px}.token-slots{display:flex;gap:6px;flex-wrap:wrap}.token-badge{display:flex;align-items:center;gap:4px;padding:4px 10px;border-radius:20px;font-size:11px;font-weight:600;border:1px solid;white-space:nowrap}.token-badge.active{background:#f0c0401f;border-color:var(--gold);color:var(--gold)}.token-badge.empty{background:transparent;border-color:var(--border);color:var(--text-dim);opacity:.4}.token-icon{font-size:13px}.position-panel{flex:1 1 0%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:8px 20px 0;position:relative;overflow:visible;min-height:0}.mat-bg{position:absolute;inset:0;background:radial-gradient(ellipse 70% 50% at 50% 55%,rgba(88,166,255,.05) 0%,transparent 100%),repeating-linear-gradient(0deg,transparent,transparent 39px,rgba(255,255,255,.012) 39px,rgba(255,255,255,.012) 40px);pointer-events:none}.position-name{font-size:24px;font-weight:800;letter-spacing:-.3px;text-align:center;z-index:1}.initiative-badge{display:inline-flex;align-items:center;gap:5px;margin-top:6px;padding:4px 14px;border-radius:20px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;z-index:1}.initiative-badge.top{background:#3fb9501f;color:var(--green);border:1px solid rgba(63,185,80,.25)}.initiative-badge.bottom{background:#f851491f;color:var(--red);border:1px solid rgba(248,81,73,.25)}.initiative-badge.neutral{background:#ffffff0f;color:var(--text-dim);border:1px solid var(--border)}.initiative-dot{width:6px;height:6px;border-radius:50%}.initiative-badge.top .initiative-dot{background:var(--green)}.initiative-badge.bottom .initiative-dot{background:var(--red)}.initiative-badge.neutral .initiative-dot{background:var(--text-dim)}.silhouette-area{position:relative;width:min(220px,40vw);aspect-ratio:1;margin:6px 0 4px;z-index:1;flex-shrink:1}.silhouette-ring{position:absolute;inset:0;border-radius:50%;border:1.5px solid var(--border);opacity:.25}.silhouette-ring:nth-child(2){inset:16px;opacity:.15}.silhouette-ring:nth-child(3){inset:32px;opacity:.08}.silhouette-figures{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}.silhouette-figures svg{width:82%;height:82%}@media(max-height:650px){.silhouette-area{width:min(160px,35vw)}}.control-row{display:flex;align-items:center;gap:8px;z-index:1}.control-label{font-size:11px;color:var(--text-dim);text-transform:uppercase;letter-spacing:.8px}.control-pips{display:flex;gap:3px}.pip{width:10px;height:10px;border-radius:2px;border:1px solid var(--border);background:transparent;transition:background .3s,border-color .3s}.pip.filled{background:var(--gold);border-color:var(--gold)}.pip.filled-ai{background:var(--red);border-color:var(--red)}.pip.filled-player{background:var(--accent);border-color:var(--accent)}.control-value{font-size:12px;color:var(--gold);font-weight:700}.turn-indicator{display:flex;align-items:center;gap:8px;margin-top:10px;z-index:1;margin-bottom:4px}.turn-text{font-size:13px;font-weight:600;text-transform:uppercase;letter-spacing:1px}.turn-text.selecting{color:var(--green)}.turn-text.resolving{color:var(--orange)}.turn-text.waiting{color:var(--text-dim)}.pulse-dot{width:8px;height:8px;border-radius:50%;background:var(--green);animation:pulse 1.5s ease-in-out infinite}.pulse-dot.resolving{background:var(--orange);animation:none}@keyframes pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.7)}}.action-area{flex-shrink:0;padding:10px 16px 20px;padding-bottom:max(20px,env(safe-area-inset-bottom));background:var(--surface);border-top:1px solid var(--border)}.action-label{font-size:11px;text-transform:uppercase;letter-spacing:1.2px;color:var(--text-dim);text-align:center;margin-bottom:8px}.action-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}.action-btn{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;padding:12px 8px;border-radius:14px;border:2px solid;cursor:pointer;transition:transform .1s,box-shadow .2s}@media(max-height:650px){.action-btn{padding:8px 6px}.action-btn .act-icon{font-size:20px}.action-btn .act-name{font-size:12px}.action-btn .act-hint{display:none}}.action-btn:active:not(.disabled){transform:scale(.96)}.action-btn .act-icon{font-size:24px;line-height:1}.action-btn .act-name{font-size:14px;font-weight:700}.action-btn .act-hint{font-size:10px;opacity:.7}.action-btn.neutral{background:var(--surface2);border-color:var(--border);color:var(--text)}.action-btn.neutral:hover{border-color:var(--text-dim)}.action-btn.optimal{background:linear-gradient(135deg,#3fb9501a,#3fb9500a);border-color:var(--green);color:var(--green);box-shadow:0 0 20px #3fb95014}.action-btn.optimal:after{content:"BEST";position:absolute;top:6px;right:6px;font-size:8px;font-weight:800;letter-spacing:1px;padding:2px 6px;border-radius:4px;background:var(--green);color:var(--bg)}.action-btn.risky{background:linear-gradient(135deg,#d299221a,#d2992208);border-color:var(--orange);color:var(--orange)}.action-btn.risky:after{content:"RISKY";position:absolute;top:6px;right:6px;font-size:8px;font-weight:800;letter-spacing:1px;padding:2px 6px;border-radius:4px;background:var(--orange);color:var(--bg)}.action-btn.disabled{background:var(--surface2);border-color:var(--border);color:var(--text-dim);opacity:.3;cursor:not-allowed;pointer-events:none}.overlay-backdrop{position:fixed;inset:0;background:#0000008c;z-index:9;opacity:0;pointer-events:none;transition:opacity .3s}.overlay-backdrop.visible{opacity:1;pointer-events:auto}.technique-drawer{position:fixed;bottom:0;left:0;right:0;background:var(--surface);border-top:1px solid var(--border);border-radius:20px 20px 0 0;padding:14px 16px 32px;padding-bottom:max(32px,env(safe-area-inset-bottom));transform:translateY(100%);transition:transform .3s cubic-bezier(.32,.72,0,1);z-index:10;max-height:70vh;overflow-y:auto}.technique-drawer.open{transform:translateY(0)}.drawer-handle{width:36px;height:4px;background:var(--text-dim);border-radius:2px;margin:0 auto 12px;opacity:.4}.drawer-title{font-size:14px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--accent);margin-bottom:10px;text-align:center}.technique-list{display:flex;flex-direction:column;gap:8px}.technique-item{display:flex;align-items:center;gap:12px;padding:14px;border-radius:12px;background:var(--surface2);border:1px solid var(--border);cursor:pointer;transition:border-color .15s,transform .1s}.technique-item:active:not(.locked){transform:scale(.98)}.technique-item:hover:not(.locked){border-color:var(--text-dim)}.technique-item.locked{opacity:.3;cursor:not-allowed;pointer-events:none}.tech-icon{font-size:20px}.tech-info{flex:1;min-width:0}.tech-name{font-size:14px;font-weight:600}.tech-desc{font-size:11px;color:var(--text-dim);margin-top:2px}.tech-meta{display:flex;flex-direction:column;align-items:flex-end;gap:4px}.tech-mod{font-size:12px;font-weight:700;color:var(--green)}.tech-req{font-size:9px;padding:3px 7px;border-radius:10px;background:#f0c0401f;color:var(--gold);border:1px solid rgba(240,192,64,.25);white-space:nowrap}.tech-req.none{background:transparent;border-color:var(--border);color:var(--text-dim)}.tech-req.locked-req{background:#f851491a;color:var(--red);border-color:#f8514940}.drawer-close-btn{display:block;width:100%;margin-top:10px;padding:12px;border-radius:12px;border:1px solid var(--border);background:transparent;color:var(--text-dim);font-size:14px;font-weight:600;cursor:pointer}.resolution-overlay{position:fixed;inset:0;background:#000000bf;z-index:20;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s;padding:20px}.resolution-overlay.visible{opacity:1;pointer-events:auto}.resolution-card{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:24px 20px;width:100%;max-width:380px;max-height:85vh;overflow-y:auto}.res-header{text-align:center;font-size:18px;font-weight:800;text-transform:uppercase;letter-spacing:2px;margin-bottom:16px}.res-header.minor{color:var(--text-dim)}.res-header.major{color:var(--orange)}.res-header.dominant{color:var(--gold)}.res-header.submission{color:var(--red)}.res-matchup{display:flex;align-items:flex-start;gap:8px;margin-bottom:16px}.res-side{flex:1;text-align:center}.res-side-label{font-size:11px;text-transform:uppercase;letter-spacing:1px;color:var(--text-dim);margin-bottom:6px}.res-player .res-side-label{color:var(--accent)}.res-ai .res-side-label{color:var(--red)}.res-category{font-size:12px;color:var(--text-dim);margin-bottom:2px}.res-technique{font-size:15px;font-weight:700;margin-bottom:8px}.res-score{font-size:32px;font-weight:900;margin-bottom:4px}.res-player .res-score{color:var(--accent)}.res-ai .res-score{color:var(--red)}.res-breakdown{font-size:10px;color:var(--text-dim);line-height:1.6}.res-vs{font-size:14px;font-weight:800;color:var(--text-dim);padding-top:48px}.res-outcome{text-align:center;font-size:14px;font-weight:700;padding:10px;margin-bottom:8px;border-radius:10px}.res-outcome.win{background:#3fb9501a;color:var(--green);border:1px solid rgba(63,185,80,.2)}.res-outcome.lose{background:#f851491a;color:var(--red);border:1px solid rgba(248,81,73,.2)}.res-outcome.draw{background:#ffffff0d;color:var(--text-dim);border:1px solid var(--border)}.res-narratives{display:flex;flex-direction:column;gap:4px;margin-bottom:16px}.res-narrative-item{font-size:12px;color:var(--text-dim);padding:6px 10px;background:#ffffff08;border-radius:6px}.end-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 24px;gap:12px}.end-icon{font-size:72px;margin-bottom:8px}.end-title{font-size:36px;font-weight:900;letter-spacing:2px}.end-title.win{color:var(--gold)}.end-title.lose{color:var(--red)}.end-reason{font-size:16px;color:var(--text-dim);margin-bottom:8px}.end-score{font-size:28px;font-weight:800;margin-bottom:24px}.htp-overlay{position:fixed;inset:0;background:#000c;z-index:50;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s;padding:16px}.htp-overlay.visible{opacity:1;pointer-events:auto}.htp-card{background:var(--surface);border:1px solid var(--border);border-radius:20px;width:100%;max-width:400px;max-height:85vh;display:flex;flex-direction:column;overflow:hidden}.htp-header{display:flex;align-items:center;justify-content:space-between;padding:18px 20px 14px;border-bottom:1px solid var(--border);flex-shrink:0}.htp-title{font-size:18px;font-weight:800;letter-spacing:1px;text-transform:uppercase;background:linear-gradient(135deg,var(--accent),var(--purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.htp-close-btn{width:32px;height:32px;border-radius:50%;border:1px solid var(--border);background:var(--surface2);color:var(--text-dim);font-size:20px;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center}.htp-body{overflow-y:auto;padding:16px 20px 24px}.htp-section{margin-bottom:20px}.htp-section:last-child{margin-bottom:0}.htp-section-title{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-dim);margin-bottom:10px}.htp-diagram{background:var(--bg);border:1px solid var(--border);border-radius:14px;padding:10px;display:flex;flex-direction:column;gap:4px}.htp-dia-row{display:flex;align-items:center;gap:8px;padding:4px 8px}.htp-dia-opp-bar{background:var(--surface);border-radius:8px;padding:6px 10px}.htp-dia-avatar{font-size:14px}.htp-dia-label-sm{font-size:10px;font-weight:600;flex:1}.htp-dia-score{font-size:14px;font-weight:800}.htp-dia-tokens{gap:4px;padding:2px 8px}.htp-dia-tok{display:inline-block;padding:2px 8px;border-radius:10px;font-size:9px;border:1px solid var(--border)}.htp-dia-tok.empty{color:var(--text-dim);opacity:.4;min-width:32px}.htp-dia-tok.empty:after{content:"â—‹"}.htp-dia-tok.filled{background:#f0c0401f;border-color:var(--gold);color:var(--gold);font-size:10px}.htp-dia-position{display:flex;flex-direction:column;align-items:center;padding:8px 0;gap:4px}.htp-dia-posname{font-size:14px;font-weight:800}.htp-dia-badge{display:inline-flex;padding:2px 10px;border-radius:10px;font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:.8px}.htp-dia-badge.bottom{background:#f851491f;color:var(--red);border:1px solid rgba(248,81,73,.25)}.htp-dia-silhouette{width:100px;height:60px}.htp-dia-silhouette svg{width:100%;height:100%}.htp-dia-adv{display:flex;align-items:center;gap:4px;font-size:9px;color:var(--text-dim);text-transform:uppercase;letter-spacing:.5px}.htp-dia-pip{display:inline-block;width:8px;height:8px;border-radius:2px;border:1px solid var(--border)}.htp-dia-pip.filled{background:var(--gold);border-color:var(--gold)}.htp-dia-actions{display:grid;grid-template-columns:1fr 1fr;gap:4px;padding:4px}.htp-dia-btn{padding:6px 4px;border-radius:8px;border:1.5px solid var(--border);background:var(--surface2);font-size:9px;font-weight:700;text-align:center;color:var(--text-dim);position:relative}.htp-dia-btn.best{border-color:var(--green);color:var(--green);background:#3fb95014}.htp-dia-best{position:absolute;top:2px;right:3px;font-size:6px;font-weight:800;letter-spacing:.5px;padding:1px 3px;border-radius:2px;background:var(--green);color:var(--bg)}.htp-callout{font-size:10px;color:var(--text-dim);padding:2px 8px 6px;display:flex;align-items:flex-start;gap:6px;line-height:1.4}.htp-callout:before{content:attr(data-num);flex-shrink:0;display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:50%;background:var(--accent);color:var(--bg);font-size:9px;font-weight:800}.htp-rules{display:flex;flex-direction:column;gap:8px}.htp-rule{display:flex;align-items:flex-start;gap:10px}.htp-rule-num{flex-shrink:0;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:50%;background:var(--surface2);border:1px solid var(--border);color:var(--text-dim);font-size:11px;font-weight:700}.htp-rule p{font-size:12px;color:var(--text-dim);line-height:1.5}.htp-rule p strong{color:var(--text)}@keyframes slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.animate-in{animation:slideUp .3s ease-out}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
