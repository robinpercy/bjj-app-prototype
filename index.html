<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>BJJ Duel ‚Äî Turn-Based Game</title>
</head>
<body>
  <div id="app" class="phone-frame">

    <!-- ‚ïê‚ïê‚ïê START SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="screen-start" class="screen active">
      <div class="start-content">
        <div class="start-logo">ü•ã</div>
        <h1 class="start-title">BJJ DUEL</h1>
        <p class="start-sub">Turn-Based Positional Combat</p>

        <div class="difficulty-select">
          <label class="difficulty-label">AI Difficulty</label>
          <div class="difficulty-buttons">
            <button class="diff-btn" data-diff="easy">Easy</button>
            <button class="diff-btn active" data-diff="medium">Medium</button>
            <button class="diff-btn" data-diff="hard">Hard</button>
          </div>
        </div>

        <button id="btn-start" class="primary-btn">Start Match</button>
        <button id="btn-how-to-play" class="secondary-btn">How to Play</button>
        <p class="start-hint">IBJJF rules ‚Äî score points by advancing position!</p>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê HOW TO PLAY OVERLAY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="how-to-play-overlay" class="htp-overlay">
      <div class="htp-card">
        <div class="htp-header">
          <h2 class="htp-title">How to Play</h2>
          <button id="htp-close" class="htp-close-btn">&times;</button>
        </div>

        <div class="htp-body">
          <!-- Annotated UI diagram -->
          <div class="htp-section">
            <div class="htp-section-title">Game Screen</div>
            <div class="htp-diagram">
              <!-- Mini opponent bar -->
              <div class="htp-dia-row htp-dia-opp-bar">
                <span class="htp-dia-avatar">&#x1f464;</span>
                <span class="htp-dia-label-sm">CPU Opponent</span>
                <span class="htp-dia-score"><span style="color:var(--red)">0</span> &ndash; <span style="color:var(--accent)">3</span></span>
              </div>
              <div class="htp-callout" data-num="1">Score &mdash; IBJJF points for positions achieved</div>

              <!-- Mini tokens -->
              <div class="htp-dia-row htp-dia-tokens">
                <span class="htp-dia-tok empty"></span>
                <span class="htp-dia-tok filled">&#x1f4aa;</span>
              </div>
              <div class="htp-callout" data-num="2">Tokens &mdash; earned via control moves, unlock submissions</div>

              <!-- Mini position panel -->
              <div class="htp-dia-position">
                <div class="htp-dia-posname">Closed Guard</div>
                <div class="htp-dia-badge bottom">You: Bottom</div>
                <div class="htp-dia-silhouette">
                  <svg viewBox="0 0 100 60" fill="none"><g opacity="0.5"><line x1="15" y1="40" x2="80" y2="40" stroke="#58a6ff" stroke-width="2"/><circle cx="80" cy="40" r="6" stroke="#58a6ff" stroke-width="1.5" fill="none"/></g><g><circle cx="48" cy="20" r="6" stroke="#f85149" stroke-width="1.5" fill="rgba(248,81,73,0.15)"/><line x1="48" y1="26" x2="48" y2="42" stroke="#f85149" stroke-width="2"/></g></svg>
                </div>
                <div class="htp-dia-adv">Control <span class="htp-dia-pip filled"></span><span class="htp-dia-pip"></span><span class="htp-dia-pip"></span></div>
              </div>
              <div class="htp-callout" data-num="3">Position &mdash; your current grappling situation and who&rsquo;s on top</div>

              <!-- Mini action grid -->
              <div class="htp-dia-actions">
                <div class="htp-dia-btn atk">&#x2694;&#xFE0F; Attack</div>
                <div class="htp-dia-btn ctrl">&#x1f91d; Increase Control</div>
                <div class="htp-dia-btn def">&#x1f6e1;&#xFE0F; Defense</div>
                <div class="htp-dia-btn rev best">&#x1f504; Reversal<span class="htp-dia-best">BEST</span></div>
              </div>
              <div class="htp-callout" data-num="4">Actions &mdash; pick a category, then choose a technique</div>
            </div>
          </div>

          <!-- Rules (IBJJF) -->
          <div class="htp-section">
            <div class="htp-section-title">IBJJF Scoring</div>
            <div class="htp-rules">
              <div class="htp-rule">
                <span class="htp-rule-num">1</span>
                <p>Each turn, pick an <strong>action category</strong> (Attack, Increase Control, Defense, or Reversal), then a <strong>specific technique</strong>.</p>
              </div>
              <div class="htp-rule">
                <span class="htp-rule-num">2</span>
                <p>Categories work like rock-paper-scissors: <strong>Attack &gt; Control &gt; Reversal &gt; Defense &gt; Attack</strong>. The winner of each exchange is decided by dice + modifiers.</p>
              </div>
              <div class="htp-rule">
                <span class="htp-rule-num">3</span>
                <p>Points are scored for <strong>achieving positions</strong>: <strong>Takedown</strong> (2pts), <strong>Sweep</strong> (2pts), <strong>Guard Pass</strong> (3pts), <strong>Mount</strong> (4pts), <strong>Back Control</strong> (4pts).</p>
              </div>
              <div class="htp-rule">
                <span class="htp-rule-num">4</span>
                <p><strong>Increase Control</strong> moves earn tokens. Tokens unlock powerful <strong>submissions</strong> &mdash; the instant-win moves.</p>
              </div>
              <div class="htp-rule">
                <span class="htp-rule-num">5</span>
                <p>Close exchanges earn <strong>advantages</strong> instead of points. Advantages break ties at match end.</p>
              </div>
              <div class="htp-rule">
                <span class="htp-rule-num">6</span>
                <p>Win by <strong>submission</strong>, reaching <strong>12 points</strong>, or having the most points when <strong>20 turns</strong> expire.</p>
              </div>
            </div>
          </div>

          <!-- Tips -->
          <div class="htp-section">
            <div class="htp-section-title">Tips</div>
            <div class="htp-rules">
              <div class="htp-rule">
                <span class="htp-rule-num" style="background:var(--green);color:var(--bg)">&#x2713;</span>
                <p>The <strong style="color:var(--green)">BEST</strong> badge highlights the recommended category for your current position.</p>
              </div>
              <div class="htp-rule">
                <span class="htp-rule-num" style="background:var(--gold);color:var(--bg)">&#x26A0;</span>
                <p>From top position: <strong>Attack</strong> to score and advance. From bottom: <strong>Reverse</strong> to escape.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê MATCH SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="screen-match" class="screen">

      <!-- Top: Opponent bar -->
      <div class="opponent-bar">
        <div class="avatar opponent-avatar">üë§</div>
        <div class="opponent-info">
          <div class="opponent-name">CPU Opponent</div>
          <div class="opponent-sub">
            <span id="ai-difficulty-label">Medium</span> AI ¬∑ Turn <span id="turn-number">1</span>
          </div>
        </div>
        <div class="score-block">
          <div class="score-display">
            <span id="score-ai" class="score-opp">0</span>
            <span class="score-dash">‚Äì</span>
            <span id="score-player" class="score-you">0</span>
          </div>
          <div class="adv-display">
            <span class="adv-label">ADV</span>
            <span id="adv-ai" class="adv-opp">0</span>
            <span class="adv-dash">‚Äì</span>
            <span id="adv-player" class="adv-you">0</span>
          </div>
        </div>
      </div>

      <!-- Opponent tokens -->
      <div class="token-strip">
        <span class="token-strip-label">OPP</span>
        <div id="ai-tokens" class="token-slots">
          <div class="token-badge empty"><span class="token-icon">‚óã</span> Empty</div>
          <div class="token-badge empty"><span class="token-icon">‚óã</span> Empty</div>
        </div>
      </div>

      <!-- Center: Position panel -->
      <div class="position-panel">
        <div class="mat-bg"></div>

        <div id="position-name" class="position-name">Standing Neutral</div>
        <div id="initiative-badge" class="initiative-badge neutral">
          <span class="initiative-dot"></span>
          <span id="initiative-text">Neutral</span>
        </div>

        <!-- Silhouette area -->
        <div class="silhouette-area">
          <div class="silhouette-ring"></div>
          <div class="silhouette-ring"></div>
          <div class="silhouette-ring"></div>
          <div id="silhouette-container" class="silhouette-figures"></div>
        </div>

        <!-- Control pips -->
        <div class="control-row">
          <span class="control-label">Control</span>
          <div id="control-pips" class="control-pips"></div>
          <span id="control-value" class="control-value">+0</span>
        </div>

        <!-- Player tokens -->
        <div class="token-strip player-token-strip">
          <span class="token-strip-label">YOU</span>
          <div id="player-tokens" class="token-slots">
            <div class="token-badge empty"><span class="token-icon">‚óã</span> Empty</div>
            <div class="token-badge empty"><span class="token-icon">‚óã</span> Empty</div>
          </div>
        </div>

        <!-- Turn state indicator -->
        <div class="turn-indicator">
          <div id="pulse-dot" class="pulse-dot"></div>
          <span id="turn-text" class="turn-text">Select Your Action</span>
        </div>
      </div>

      <!-- Bottom: Action buttons -->
      <div id="action-area" class="action-area">
        <div class="action-label">Choose Action Category</div>
        <div id="action-grid" class="action-grid">
          <!-- Populated by JS -->
        </div>
      </div>

      <!-- Technique drawer -->
      <div id="overlay-backdrop" class="overlay-backdrop"></div>
      <div id="technique-drawer" class="technique-drawer">
        <div class="drawer-handle"></div>
        <div id="drawer-title" class="drawer-title">Techniques</div>
        <div id="technique-list" class="technique-list"></div>
        <button id="drawer-close" class="drawer-close-btn">Cancel</button>
      </div>

      <!-- Resolution overlay -->
      <div id="resolution-overlay" class="resolution-overlay">
        <div class="resolution-card">
          <div id="res-header" class="res-header">Resolution</div>
          <div class="res-matchup">
            <div class="res-side res-player">
              <div class="res-side-label">You</div>
              <div id="res-player-category" class="res-category"></div>
              <div id="res-player-technique" class="res-technique"></div>
              <div id="res-player-score" class="res-score"></div>
              <div id="res-player-breakdown" class="res-breakdown"></div>
            </div>
            <div class="res-vs">VS</div>
            <div class="res-side res-ai">
              <div class="res-side-label">CPU</div>
              <div id="res-ai-category" class="res-category"></div>
              <div id="res-ai-technique" class="res-technique"></div>
              <div id="res-ai-score" class="res-score"></div>
              <div id="res-ai-breakdown" class="res-breakdown"></div>
            </div>
          </div>
          <div id="res-outcome" class="res-outcome"></div>
          <div id="res-narratives" class="res-narratives"></div>
          <button id="res-continue" class="primary-btn">Continue</button>
        </div>
      </div>

    </div>

    <!-- ‚ïê‚ïê‚ïê MATCH END SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="screen-end" class="screen">
      <div class="end-content">
        <div id="end-icon" class="end-icon">üèÜ</div>
        <h2 id="end-title" class="end-title">Victory!</h2>
        <p id="end-reason" class="end-reason">Points victory!</p>
        <div id="end-score" class="end-score"></div>
        <button id="btn-rematch" class="primary-btn">Rematch</button>
        <button id="btn-menu" class="secondary-btn">Main Menu</button>
      </div>
    </div>

  </div>

  <script type="module" src="./src/main.js"></script>
</body>
</html>
